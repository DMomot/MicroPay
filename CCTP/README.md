# CCTP Transfer and Burn Contract

üöÄ –ü—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è EIP3009 transfer –∏ CCTP burn –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ BASE —Å–µ—Ç–∏.

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- **transferAndBurn**: –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
  1. EIP3009 transferWithAuthorization - –ø–µ—Ä–µ–≤–æ–¥–∏—Ç USDC –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
  2. CCTP burn - —Å–∂–∏–≥–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —á–µ—Ä–µ–∑ TokenMinter
- **emergencyWithdraw**: –§—É–Ω–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è owner'–∞

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
npx hardhat compile

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (—Ñ–æ—Ä–∫ BASE —Å–µ—Ç–∏)
npm run test

# –ó–∞–ø—É—Å–∫ —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
npx hardhat test test/CCTPTransferBurn.simple.test.js
```

## üìã –ê–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ BASE

- **USDC**: `0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913`
- **CCTP TokenMinter**: `0x1682Ae6375C4E4A97e4B583BC394c861A46D8962`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ä–∞–∑—É)
```bash
npx hardhat test test/CCTPTransferBurn.simple.test.js --verbose
```

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- ‚úÖ –î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ EIP3009 –ø–æ–¥–ø–∏—Å–∏
- ‚úÖ –ë–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ñ–æ—Ä–∫–æ–º BASE
```bash
npx hardhat test test/CCTPTransferBurn.test.js
```

–≠—Ç–∏ —Ç–µ—Å—Ç—ã –≤–∫–ª—é—á–∞—é—Ç:
- üîÑ –§–æ—Ä–∫ BASE mainnet
- üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ USDC
- ‚úçÔ∏è –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ EIP3009 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- üî• –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ transferAndBurn

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–î–µ–ø–ª–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞**:
   ```solidity
   CCTPTransferBurn cctp = new CCTPTransferBurn(
       USDC_ADDRESS,
       TOKEN_MINTER_ADDRESS
   );
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ EIP3009 –ø–æ–¥–ø–∏—Å–∏**:
   ```javascript
   const signature = await user._signTypedData(domain, types, value);
   const { v, r, s } = ethers.utils.splitSignature(signature);
   ```

3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ transferAndBurn**:
   ```javascript
   await cctp.transferAndBurn(
       from, amount, validAfter, validBefore, nonce, v, r, s
   );
   ```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ ReentrancyGuard –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–µ–µ–Ω—Ç—Ä–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ Ownable –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ Emergency —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è EIP3009 –ø–æ–¥–ø–∏—Å–µ–π

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CCTP/                             # Hardhat –ø—Ä–æ–µ–∫—Ç
‚îú‚îÄ‚îÄ contracts/
‚îÇ   ‚îú‚îÄ‚îÄ CCTPTransferBurn.sol      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
‚îÇ   ‚îî‚îÄ‚îÄ interfaces/
‚îÇ       ‚îú‚îÄ‚îÄ IEIP3009.sol          # EIP3009 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îî‚îÄ‚îÄ ITokenMinter.sol      # CCTP –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îú‚îÄ‚îÄ CCTPTransferBurn.test.js        # –ü–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ CCTPTransferBurn.simple.test.js # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ hardhat.config.js             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–∫–æ–º BASE
‚îî‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üéØ MVP –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ ScoutPay —Å–∏—Å—Ç–µ–º—É.
